# ============================================
# AI Ticket Classifier - Environment Configuration
# ============================================
# IMPORTANT: Copy this file to .env and fill in your values
# Never commit .env to version control!

# === Application Settings ===
FLASK_ENV=production
DEBUG=false
PORT=5000
WORKERS=4

# === API Keys (REQUIRED) ===
# Gemini API Key - Get from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Your API Key for clients - Generate with: openssl rand -hex 32
# This is what clients use in X-API-Key header
API_KEY=your_secure_random_api_key_here

# === Redis Configuration (NEW) ===
# Redis URL for rate limiting and caching
# For Docker Compose: redis://redis:6379/0
# For local development: redis://localhost:6379/0
# For no Redis (testing only): memory://
REDIS_URL=redis://redis:6379/0

# Redis connection settings
REDIS_DB=0
REDIS_DECODE_RESPONSES=true
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# === Rate Limiting ===
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=60
RATE_LIMIT_WINDOW=60

# Rate limit storage (redis or memory)
# Use 'redis' for production, 'memory' for development
RATE_LIMIT_STORAGE=redis

# === Caching ===
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_BACKEND=redis

# === Logging ===
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_MAX_SIZE=5242880
LOG_BACKUP_COUNT=10
LOG_DIR=./logs

# === Gemini Model Settings ===
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_TEMPERATURE=0.1
GEMINI_MAX_TOKENS=30
GEMINI_TOP_P=0.95

# === Security (Optional) ===
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS=*
CORS_ENABLED=false

# === Monitoring & Metrics (NEW) ===
ENABLE_METRICS=true
METRICS_PORT=5000
METRICS_PATH=/metrics

# Prometheus settings
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# === Performance ===
# Gunicorn workers (recommended: 2-4 x number of CPU cores)
GUNICORN_WORKERS=4
GUNICORN_THREADS=2
GUNICORN_TIMEOUT=120
GUNICORN_KEEPALIVE=5
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=50

# === Health Checks ===
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# === Docker Compose Services (Reference) ===
# These are set automatically in docker-compose.yml
# APP_HOST=0.0.0.0
# REDIS_HOST=redis
# REDIS_PORT=6379
# PROMETHEUS_HOST=prometheus
# PROMETHEUS_PORT=9090
# GRAFANA_HOST=grafana
# GRAFANA_PORT=3000

# === Grafana Configuration (Optional) ===
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin123
GF_INSTALL_PLUGINS=redis-datasource

# === Example Production Values ===
# FLASK_ENV=production
# DEBUG=false
# PORT=5000
# GEMINI_API_KEY=AIzaSyABC123...xyz
# API_KEY=093b2dc072107a78d7676dca4cec411fae8e3b2ef80c4dca14a605c116ac1201
# REDIS_URL=redis://redis:6379/0
# RATE_LIMIT_STORAGE=redis
# CACHE_BACKEND=redis
# ENABLE_METRICS=true
# LOG_LEVEL=INFO

# === Example Development Values ===
# FLASK_ENV=development
# DEBUG=true
# PORT=5000
# GEMINI_API_KEY=AIzaSyABC123...xyz
# API_KEY=test_key_12345
# REDIS_URL=memory://
# RATE_LIMIT_STORAGE=memory
# CACHE_BACKEND=memory
# ENABLE_METRICS=false
# LOG_LEVEL=DEBUG